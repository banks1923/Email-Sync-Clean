# One-shot consolidation mapping (initial draft)

file_moves:
  # Database
  - from: shared/db/simple_db.py
    to: lib/db.py
  - from: shared/db/migrations
    to: lib/migrations
  - from: scripts/database/backup_database.py
    to: lib/backup_restore.py
  - from: scripts/database/enable_foreign_keys_comprehensive.py
    to: lib/backup_restore.py
  - from: scripts/database/clean_slate_reset.py
    to: lib/backup_restore.py
  - from: scripts/database/setup_semantic_schema.py
    to: lib/migrations/setup_semantic_schema.py

  # Embeddings / Vector store
  - from: utilities/embeddings/embedding_service.py
    to: lib/embeddings.py
  - from: utilities/embeddings/batch_processor.py
    to: lib/embeddings_batch.py
  - from: utilities/vector_store/__init__.py
    to: lib/vector_store.py

  # Search
  - from: search_intelligence/basic_search.py
    to: lib/search.py

  # Pipelines & Timeline
  - from: utilities/semantic_pipeline.py
    to: lib/pipelines.py
  - from: utilities/chunk_pipeline.py
    to: lib/pipelines.py
  - from: utilities/timeline
    to: lib/timeline

  # CLI: Keep modular CLI and drop vsearch
  - from: tools/scripts/cli/cli_main.py
    to: cli/__main__.py
  - from: tools/scripts/cli/docs_handler.py
    to: cli/index.py
  - from: tools/scripts/cli/search_handler.py
    to: cli/search.py
  - from: tools/scripts/cli/entity_handler.py
    to: cli/admin.py
  - from: tools/scripts/cli/info_handler.py
    to: cli/admin.py
  - from: tools/scripts/cli/legal_handler.py
    to: cli/admin.py
  - from: tools/scripts/cli/process_handler.py
    to: cli/index.py
  - from: tools/scripts/cli/timeline_handler.py
    to: cli/admin.py
  - from: tools/scripts/cli/upload_handler.py
    to: cli/index.py

delete_globs:
  - tools/scripts/vsearch
  - scripts/data/generate_*embeddings.py
  - tools/scripts/*embed*
  - shared/processors/**
  - shared/ingestion/**

import_rewrites:
  # DB
  - from: shared.db.simple_db
    to: lib.db
  - from: scripts.database
    to: lib
  # Embeddings / Vector store
  - from: utilities.embeddings
    to: lib.embeddings
  - from: utilities.vector_store
    to: lib.vector_store
  # Search
  - from: search_intelligence.basic_search
    to: lib.search
  - from: tools.scripts.cli.search_handler
    to: lib.search
  # Pipelines
  - from: utilities.semantic_pipeline
    to: lib.pipelines
  - from: utilities.chunk_pipeline
    to: lib.pipelines
  # Timeline
  - from: utilities.timeline
    to: lib.timeline

