graph TB
    subgraph "✅ Unified Architecture (Migration Complete)"
        Gmail[Gmail Service] --> UnifiedTable["content_unified table<br/>999 records<br/>Integer IDs"]
        PDF[PDF Service] --> UnifiedTable
        Upload[Upload Service] --> UnifiedTable
        
        UnifiedTable -->|"✅ Connected"| Embeddings[Embedding Generation<br/>Legal BERT 1024D]
        
        Embeddings -->|"Auto-triggers"| VectorStore[Qdrant Vector Store]
        
        VectorStore --> Search[Search Service<br/>Semantic + Keyword]
        
        style UnifiedTable fill:#ccffcc
        style Embeddings fill:#ccffcc
        style VectorStore fill:#ccffcc
        style Search fill:#ccffcc
    end
    
    subgraph "Column Mappings (Complete)"
        OldColumns["❌ OLD COLUMNS<br/>type<br/>content<br/>content_type"] 
        NewColumns["✅ NEW COLUMNS<br/>source_type<br/>body<br/>source_type"]
        OldColumns -.->|"Migrated"| NewColumns
        style OldColumns fill:#ffcccc,stroke-dasharray: 5 5
        style NewColumns fill:#ccffcc
    end
    
    subgraph "Services Using SimpleDB (35 files)"
        KnowledgeGraph[Knowledge Graph<br/>- Similarity Analysis<br/>- Topic Clustering<br/>- Timeline Relations]
        SearchIntel[Search Intelligence<br/>- Duplicate Detection<br/>- Smart Search<br/>- Entity Extraction]
        LegalIntel[Legal Intelligence<br/>- Case Analysis<br/>- Document Timeline]
        
        UnifiedTable --> KnowledgeGraph
        UnifiedTable --> SearchIntel
        UnifiedTable --> LegalIntel
        
        style KnowledgeGraph fill:#e6f2ff
        style SearchIntel fill:#e6f2ff
        style LegalIntel fill:#e6f2ff
    end