[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = --verbose --tb=short --strict-markers
markers =
    # Core test categorization for CI/CD
    unit: Unit tests (fast, isolated) - Run first in CI
    integration: Integration tests (slower, cross-service) - Run after unit tests
    adversarial: Adversarial/edge case tests
    performance: Performance and benchmark tests
    requires_models: Tests requiring AI models (Legal BERT, Whisper)
    requires_auth: Tests requiring external authentication
    slow: Slow tests (disabled by default)
    
    # Testing strategy markers
    property: Property-based tests using Hypothesis
    coverup_generated: Tests generated by CoverUp tool

    # Legacy markers (maintained for compatibility)
    auth_required: marks tests that require authentication
    api_required: marks tests that require external APIs
    benchmark: marks performance benchmark tests
    mcp: marks MCP server and tool tests
    pdf: marks PDF processing tests
    vector: marks vector service and embedding tests
    real_data: marks tests that use real email data (not mocked)

    # Vector service specific markers
    memory_test: mark test as memory management focused
    singleton_test: mark test as singleton pattern focused
    factory_test: mark test as factory pattern focused
    concurrent_test: mark test as concurrent access focused
    legal_bert_test: mark test as Legal BERT specific
    core_test: mark test as core functionality focused

# Ignore import warnings from deprecated packages
filterwarnings =
    ignore::DeprecationWarning:PyPDF2
    ignore::DeprecationWarning
